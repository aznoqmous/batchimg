@import url("https://unpkg.com/bamboo.css");
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
@import url("https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0");

:root {
    --background-color: #272727;
    --text-color: white;
}

* {
    font-family: Inter;
    box-sizing: border-box;
    margin: 0;
}
img {
    vertical-align: middle;
}
body {
    padding: 2rem;
    width: 100vw;
    max-width: unset;
    overflow-x: hidden;
}
h1 {
    color: var(--b-focus);
    margin: 0;
}
small {
    color: var(--b-focus);
    display: block;
}
.settings-and-preview {
    display: flex;
    gap: 2rem;
    > * {
        width: calc(50% - 1rem);
    }
    .settings {
        &:not(.active){
            pointer-events: none;
            opacity: 0.5;
        }
        .templates {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            .template {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                background: var(--b-bg-2);
                border: 1px solid var(--b-line);
                border-radius: 2px;
                padding: 1rem;
                cursor: pointer;
                span {
                    font-size: 2.5rem;
                }
            }
        }
    }
}
.row {
    display: flex;
}
.column {
    display: flex;
    flex-direction: column;
}
.file-input {
    margin-bottom: 2rem;
    input {
        cursor: pointer;
        padding: 1rem;
        transition: all 0.2s ease;
        color: transparent;
        &:hover {
            outline: 2px dashed var(--b-focus);
        }
    }
    ::-webkit-file-upload-button {
        display: none;
    }
}
.uploaded-files, .converted-files {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    padding-left: 0;
    max-height: 15rem;
    overflow-y: auto;
    margin-bottom: 3rem;
    > * {
        display: flex;
        flex-direction: column;
        position: relative;
        figure {
            cursor: pointer;
            position: relative;
            width: 5rem;
            height: 5rem;
            border-radius: 2px;
            overflow: hidden;
            margin: 0;
            &:before {
                content: "";
                background-repeat: repeat;
                background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAIAAAD91JpzAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDkuMS1jMDAxIDc5LmE4ZDQ3NTM0OSwgMjAyMy8wMy8yMy0xMzowNTo0NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI0LjcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjQ5RDAwRTk3NEUzMTExRUVBRDg1RjExN0ZENzdGMTc4IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQ5RDAwRTk4NEUzMTExRUVBRDg1RjExN0ZENzdGMTc4Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NDlEMDBFOTU0RTMxMTFFRUFEODVGMTE3RkQ3N0YxNzgiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NDlEMDBFOTY0RTMxMTFFRUFEODVGMTE3RkQ3N0YxNzgiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6xIwXhAAAAFklEQVR42mLYv3//////GYAYyAIIMABJOgp1Jz+Y3wAAAABJRU5ErkJggg==);
                position: absolute;
                inset: 0;
                z-index: -1;
                background-size: 1rem;
            }        
        img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        }
        legend {
            position: absolute;
            inset: 0;
            font-size: 0.7rem;
            background: rgba(0,0,0,0.4);
            text-shadow: 0 0 2px black;
            overflow: hidden;
            color: white;
        }
    }
}

.preview {
    display: flex;
    flex-direction: column;
    position: relative;
    
    > .before-after {
        display: flex;
        align-items: center;
        position: absolute;
        z-index: 100;
        bottom: 100%;
        width: 100%;
        > * {
            width: 50%;
            text-align: center;
        }
    }
    > .canvas {
        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAIAAAD91JpzAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDkuMS1jMDAxIDc5LmE4ZDQ3NTM0OSwgMjAyMy8wMy8yMy0xMzowNTo0NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI0LjcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjQ5RDAwRTk3NEUzMTExRUVBRDg1RjExN0ZENzdGMTc4IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQ5RDAwRTk4NEUzMTExRUVBRDg1RjExN0ZENzdGMTc4Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NDlEMDBFOTU0RTMxMTFFRUFEODVGMTE3RkQ3N0YxNzgiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NDlEMDBFOTY0RTMxMTFFRUFEODVGMTE3RkQ3N0YxNzgiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6xIwXhAAAAFklEQVR42mLYv3//////GYAYyAIIMABJOgp1Jz+Y3wAAAABJRU5ErkJggg==);
        position: relative;
        overflow: hidden;
        aspect-ratio: 1.5;
        background-size: 10%;
        image-rendering: pixelated;
        border-radius: 2px;

        --preview-x: 50%;
        user-select: none;

        > .before-container {
            position: absolute;
            inset: 0;
            clip-path: polygon(0 0, var(--preview-x) 0, var(--preview-x) 100%, 0% 100%);
        }
        > .after-container {
            position: absolute;
            inset: 0;
            clip-path: polygon(var(--preview-x) 0, 100% 0, 100% 100%, var(--preview-x) 100%);
        }
        figure {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            margin: 0;
            > img {
                object-position: center;
                max-width: unset;
                border: 0.25rem solid white;
                box-shadow: 0 0 0.25rem rgba(0,0,0,0.5);
                border-radius: 2px;
            }
        }
        .slider {
            position: absolute;
            left: var(--preview-x);
            height: 100%;
            border-right: 2px solid white;
            top: 0;
            z-index: 1;
            box-shadow: 0 0 6px black;
            opacity: 0.8;

            &:before {
                content:"";
                position: absolute;
                width: 2rem;
                aspect-ratio: 1;
                border-radius: 50%;
                background: white;
                box-shadow: 0 0 6px black;
                transform: translate(-50%, -50%);
                left: 50%;
                top: 50%;
                cursor: grab;
            }
        }
    }
}

.download {
    margin-top: 1rem;
    gap: 0.5rem;
    button {
        padding: 1rem;
        font-weight: bold;
    }
    progress {
        width: 100%;
    }
    .before-after {
        display: flex;
        justify-content: space-evenly;
    }
}

details {
    padding: 0.5rem;
    summary {
        display: flex;
        align-items: center;
        gap: 0.3rem;
    }
    > *:not(summary){
        background: var(--b-bg-1);
        padding: 0.5rem;
        &:nth-child(2) {
            border-radius: 0.25rem 0.25rem 0 0;
        }
        &:last-child {
            border-radius: 0 0 0.25rem 0.25rem;
        }
    }
}

progress {
    accent-color: var(--b-focus);

}
input {
    accent-color: var(--b-focus);
}